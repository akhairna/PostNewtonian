def execnotebook(nbfile):
    """Execute all code cells from another notebook.

    This function is stolen from
    <http://nbviewer.ipython.org/5491090/analysis.ipynb>.

    """
    from io import open
    from IPython.nbformat import current
    with open(nbfile) as f:
        nb = current.read(f, 'json')
    ip = get_ipython()
    for cell in nb.worksheets[0].cells:
        if cell.cell_type != 'code':
            continue
        ip.run_cell(cell.input)
